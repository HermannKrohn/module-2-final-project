

<body class = 'container-fluid'>
    <h1>Edit <%=@recipe.title.capitalize%></h1><br>

    <form method = 'POST' action = '/recipes/<%=@recipe.id%>'>
        <input type = 'hidden' name = '_method' value = 'PATCH'>
        <button class = 'btn btn-primary'>Finalize Edits</button>
            <hr>


            <div>
                <label>Title: </label>
                <input class = 'form-control' type = 'text' name = 'recipe[:title]' value = '<%=@recipe.title%>'>
            </div>
            <div>
                <label>Category: </label>
                <input class = 'form-control' type = 'text' name = 'recipe[:category]' value = '<%=@recipe.category%>'>
            </div><br>
           <div class = 'row container'>
            <div class = 'col-4'>
                <h5>Ingredients:</h5>
            </div>
            <div class = 'col-8'>
                <h5>Steps:</h5>
            </div>
        </div>
        <div class = 'row container'>
            <div class = 'col-4'>
                <%x =1 %>
                    <%@recipe.ingredients.each do | ingredient |%>
                        <label><strong>Ingredient <%=x%></strong></label>
                        <input class = 'form-control' type = 'text' name = 'ingredients[:name]' value = '<%=ingredient.name%>'>
                        <input class = 'form-control' type = 'text' name = 'ingredients[:name]' value = '<%=ingredient.category%>'>
                        <input class = 'form-control' type = 'text' name = 'ingredients[:name]' value = '<%=ingredient.quantity%>'>
                        <input class = 'form-control' type = 'text' name = 'ingredients[:name]' value = '<%=ingredient.units%>'>
                        <%x += 1%>
                    <%end%>
            </div>

            <div class = 'col-8' style = 'max-width: 1500px;'>
                <%y = 1%>
                <%@recipe.steps.each do | step |%>
                        <label><strong>Step <%=y%></strong></label>
                        <input class = 'form-control' type = 'textarea' name = 'steps[:description]' value = '<%=step.description%>'>
                        <%y += 1%>
                <%end%>
            </div>

        </div>
        <hr>
        <div class = 'row container'>
            <h4>Add additional ingredients or steps</h4>
        </div>
        <hr>
        <div class = 'row container'>
            <div id = 'ingredients' class = 'col-4'>
            </div>
            <div id = 'steps' class = 'col-8' style = 'max-width: 1500px;'>
            </div>
        </div>
        
    </form><br>
    <button class = 'btn btn-primary' onclick="myIngredientFunction()">Add an ingredient</button>
    <button class = 'btn btn-primary' onclick="myStepFunction()">Add recipe step</button>


        <script>
            var ingredientCounter = 1;
            var stepCounter = 1;
            function myIngredientFunction() {
               
                var v = document.createElement("LABEL");
                var w = document.createElement("INPUT");
                var x = document.createElement("INPUT");
                var y = document.createElement("INPUT");
                var z = document.createElement("INPUT");

                w.setAttribute("type", "text");
                w.setAttribute("class", "form-control")
                w.setAttribute("name", "ingredients[names][]");
                w.setAttribute("value", "name");
                x.setAttribute("type", "text");
                x.setAttribute("class", "form-control")
                x.setAttribute("name", "ingredients[categories][]");
                x.setAttribute("value", "category");
                y.setAttribute("type", "text");
                y.setAttribute("class", "form-control")
                y.setAttribute("name", "ingredients[quantities][]");
                y.setAttribute("value", "quantity");
                z.setAttribute("type", "text");
                z.setAttribute("class", "form-control")
                z.setAttribute("name", "ingredients[units][]");
                z.setAttribute("value", "units");

                document.getElementById('ingredients').appendChild(v).innerHTML = `<strong>Ingredient ${ingredientCounter}</strong>`;
                document.getElementById('ingredients').appendChild(w);
                document.getElementById('ingredients').appendChild(x);
                document.getElementById('ingredients').appendChild(y);
                document.getElementById('ingredients').appendChild(z);

                ingredientCounter += 1;
                }

            function myStepFunction() {
                let counter = 1
                var v = document.createElement("LABEL");
                var w = document.createElement("TEXTAREA");

                w.setAttribute("type", "textarea");
                w.setAttribute("style", "max-width: 900px; height: 100px;")
                w.setAttribute("class", "form-control")
                w.setAttribute("name", "steps[descriptions][]");
                w.setAttribute("placeholder", "description");

                document.getElementById('steps').appendChild(v).innerHTML = `<strong>Step ${stepCounter}</strong>`;
                document.getElementById('steps').appendChild(w);

                stepCounter++
                }


        </script>
        

</body>